# Action Plan: Implement Authentication with `better-auth-ui`

## 1. Overall Goal

The goal is to implement a complete and professional authentication and user management experience. This involves:
1.  Using `better-auth-ui` to create dedicated login and sign-up pages.
2.  Configuring email/password, Google, and GitHub authentication providers.
3.  Consolidating user management features (like password change and account deletion) into a single "Profile" page.

## 2. Regression Risks & Mitigation

-   **Risk: Incorrectly configured `better-auth` providers could prevent all logins.**
    -   **Mitigation**: Each provider (credentials, Google, GitHub) will be configured and tested independently in `src/lib/auth.ts`.
-   **Risk: The new UI components might not match the existing site's theme.**
    -   **Mitigation**: `better-auth-ui` uses `shadcn/ui`, minimizing style clashes. We will verify components render correctly in the existing dark theme.
-   **Risk: Missing or incorrect environment variables will cause auth providers to fail.**
    -   **Mitigation**: A checklist of required environment variables will be maintained in the local `.env` file.

## 3. Action Plan

### Part 1: Install and Configure `better-auth-ui`

-   **Action 1.1: Install the library and dependencies.**
    -   Run `bun add @daveyplate/better-auth-ui`.
    -   Run `bun add bcrypt` and `bun add -d @types/bcrypt` for password hashing.

-   **Action 1.2: Configure `better-auth` for Credentials and Google.**
    -   Add the `credentials` and `google` providers to the configuration object in `src/lib/auth.ts`.
    -   **File to be altered**: `src/lib/auth.ts`

-   **Action 1.3: Add Environment Variables.**
    -   Add `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` to the environment variables.
    -   **File to be altered**: `.env` (or Vercel project settings).

### Part 2: Create Authentication Pages

-   **Action 2.1: Create the `AuthLayout` component.**
    -   This component will provide a centered, card-based container for the auth forms.
    -   **File to be created**: `src/app/_components/client/AuthLayout.tsx`

-   **Action 2.2: Create the Sign-Up Page (`/signup`).**
    -   Use the `SignUp` component from `better-auth-ui`, wrapped in the `AuthLayout`.
    -   **File to be created**: `src/app/signup/page.tsx`

-   **Action 2.3: Create the Login Page (`/login`).**
    -   Use the `SignIn` component from `better-auth-ui`, wrapped in `AuthLayout`.
    -   **File to be created**: `src/app/login/page.tsx`

### Part 3: Integrate and Consolidate User Management

-   **Action 3.1: Update Header Navigation.**
    -   Modify the main header to link to `/login` and `/signup`.
    -   **File to be altered**: `src/app/_components/client/HeaderClient.tsx`

-   **Action 3.2: Consolidate "Taste Profile" into a new "Profile" page.**
    -   Rename the page title and any references from "Taste Profile" to "Profile".
    -   Integrate the `UpdatePassword` and `DeleteAccount` components from `better-auth-ui` into this page.
    -   **File to be altered**: `src/app/profile/page.tsx`

### Part 4: Final Testing

-   **Action 4.1: Test the full authentication flow.**
    -   **Test Case 1 (Sign Up)**: Navigate to `/signup`, create a new account using email/password.
    -   **Test Case 2 (Login/Logout)**: Test login with credentials, Google, and GitHub. Verify logout works.
    -   **Test Case 3 (Profile Actions)**: As a logged-in user, go to the profile page and test the "Change Password" and "Delete Account" functionalities. 